<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#000000" />
  <title>G√©n√©rateur de Motivation</title>

  <style>
    :root{
      --bg:#000;
      --card:rgba(0,0,0,0.92);
      --text:#FFD700;
      --muted:rgba(255,215,0,0.75);
      --border:rgba(255,215,0,0.25);
      --shadow:0 0 20px rgba(255,215,0,0.6);
      --btnText:#000;
      --gradA:#FFA500;
      --gradB:#FFD700;
      --radius:16px;
    }

    body.theme-minimal{
      --text:#fff;
      --muted:rgba(255,255,255,0.75);
      --border:rgba(255,255,255,0.18);
      --shadow:0 0 18px rgba(255,255,255,0.12);
      --btnText:#000;
      --gradA:#fff;
      --gradB:#bdbdbd;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: radial-gradient(900px 600px at 50% 10%, rgba(255,215,0,0.14), transparent 60%),
                  radial-gradient(900px 600px at 10% 90%, rgba(255,165,0,0.12), transparent 60%),
                  var(--bg);
      color:var(--text);
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      padding:max(16px, env(safe-area-inset-top)) 16px max(16px, env(safe-area-inset-bottom)) 16px;
      text-align:center;
    }

    .app{
      width:100%;
      max-width:420px;
      background:var(--card);
      border-radius:var(--radius);
      padding:20px;
      box-shadow:var(--shadow);
      border:1px solid var(--border);
    }

    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:14px;
    }

    .title{
      margin:0;
      font-size:20px;
      font-weight:bold;
    }

    .settings-btn{
      border:1px solid var(--border);
      background:transparent;
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:bold;
    }

    .quote-box{
      border:1px solid var(--border);
      background:rgba(255,215,0,0.06);
      border-radius:14px;
      padding:16px;
      min-height:120px;
      display:flex;
      align-items:center;
      justify-content:center;
      margin-top:10px;
    }

    .quote{
      margin:0;
      font-weight:bold;
      line-height:1.4;
      word-break:break-word;
    }

    .sub{
      margin:12px 0 0 0;
      font-size:13px;
      color:var(--muted);
    }

    .buttons{
      display:grid;
      gap:10px;
      margin-top:14px;
    }

    .btn{
      width:100%;
      padding:14px;
      font-size:16px;
      font-weight:bold;
      border:none;
      border-radius:12px;
      cursor:pointer;
      transition:0.2s;
    }

    .btn-primary{
      background:linear-gradient(90deg,var(--gradA),var(--gradB));
      color:var(--btnText);
    }

    .btn-secondary{
      background:transparent;
      border:1px solid var(--border);
      color:var(--text);
      padding:12px;
    }

    .btn:active{ transform:scale(0.99); }

    .footer{
      margin-top:14px;
      padding-top:10px;
      border-top:1px solid rgba(255,215,0,0.2);
      font-size:12px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    .pill{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,215,0,0.05);
    }

    /* Modal settings */
    .overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.65);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:9999;
    }
    .overlay.show{ display:flex; }

    .modal{
      width:100%;
      max-width:520px;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:var(--shadow);
      padding:16px;
      text-align:left;
    }

    .modal h2{
      margin:0 0 10px 0;
      font-size:16px;
      color:var(--text);
    }

    .row{
      display:grid;
      grid-template-columns: 1fr auto;
      align-items:center;
      gap:10px;
      padding:10px 0;
      border-top:1px solid rgba(255,255,255,0.06);
    }
    .row:first-of-type{ border-top:none; }

    .row label{
      font-size:13px;
      color:var(--muted);
    }

    input[type="number"], select{
      background:transparent;
      color:var(--text);
      border:1px solid var(--border);
      border-radius:12px;
      padding:8px 10px;
      outline:none;
      width:120px;
    }

    input[type="range"]{ width:180px; }

    .modal-actions{
      display:grid;
      gap:10px;
      margin-top:12px;
    }

    .tiny{
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
      margin-top:6px;
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="topbar">
      <p class="title">üí° Motivation du jour</p>
      <button class="settings-btn" id="openSettingsBtn">‚öôÔ∏è</button>
    </div>

    <div class="quote-box">
      <p class="quote" id="quote">Appuie sur <b>Start</b> pour recevoir ta motivation.</p>
    </div>

    <p class="sub" id="limitMessage" style="display:none;">
      üíõ Limite atteinte aujourd‚Äôhui. Reviens demain !
    </p>

    <div class="buttons">
      <button class="btn btn-primary" id="startBtn">üöÄ Start</button>
      <button class="btn btn-secondary" id="newBtn">‚ú® Nouvelle motivation</button>
    </div>

    <div class="footer">
      <div class="pill" id="counter">0 / 5 aujourd‚Äôhui</div>
      <div class="pill" id="date">‚Äî</div>
    </div>
  </div>

  <!-- SETTINGS MODAL -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true">
    <div class="modal">
      <h2>‚öôÔ∏è Settings</h2>

      <div class="row">
        <label>Limite de motivations par jour</label>
        <input id="limitInput" type="number" min="1" max="20" value="5">
      </div>

      <div class="row">
        <label>Taille du texte</label>
        <input id="fontRange" type="range" min="16" max="26" value="18">
      </div>

      <div class="row">
        <label>Th√®me</label>
        <select id="themeSelect">
          <option value="gold">Noir & Or</option>
          <option value="minimal">Sombre minimal</option>
        </select>
      </div>

      <div class="row">
        <label>Vibration (si support√©)</label>
        <input id="vibrateToggle" type="checkbox">
      </div>

      <div class="row">
        <label>Reset compteur (pour tests)</label>
        <button class="btn btn-secondary" id="resetBtn" style="width:auto;padding:10px 12px;border-radius:12px;">R√©initialiser</button>
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" id="saveBtn">üíæ Enregistrer</button>
        <button class="btn btn-secondary" id="closeBtn">Fermer</button>
        <div class="tiny">
          La limite est ‚Äúpar jour‚Äù gr√¢ce au stockage local (localStorage).  
          Si tu vides les donn√©es de l‚Äôapp, le compteur repart √† z√©ro.
        </div>
      </div>
    </div>
  </div>

  <script>
    // ---------------------------
    // 50 phrases
    // ---------------------------
    const quotes = [
      "N‚Äôabandonne jamais, m√™me quand c‚Äôest difficile.",
      "Chaque jour est une nouvelle chance.",
      "Tu es plus fort que tu ne le penses.",
      "Un petit pas aujourd‚Äôhui vaut mieux que rien.",
      "Continue, tu es sur la bonne voie.",
      "Le succ√®s commence par la discipline.",
      "Crois en toi, toujours.",
      "Les efforts d‚Äôaujourd‚Äôhui paient demain.",
      "M√™me lentement, tu avances.",
      "Ta pers√©v√©rance fera la diff√©rence.",
      "Rien n‚Äôest impossible √† celui qui essaie.",
      "Fais de ton mieux, c‚Äôest d√©j√† √©norme.",
      "Chaque √©chec t‚Äôapprend quelque chose.",
      "Tu construis ton avenir maintenant.",
      "Ne l√¢che rien, tu progresses.",
      "Le courage, c‚Äôest d‚Äôavancer malgr√© la peur.",
      "Tu peux √™tre fier de toi.",
      "Le changement commence par une d√©cision.",
      "Sois constant, pas parfait.",
      "Ton potentiel est immense.",
      "Travaille pour la vie que tu veux.",
      "Chaque jour compte.",
      "Tu es capable de grandes choses.",
      "Avance, m√™me quand personne ne regarde.",
      "La motivation vient apr√®s l‚Äôaction.",
      "Fais confiance au processus.",
      "Tu n‚Äôes pas en retard, tu es en chemin.",
      "Tes r√™ves valent l‚Äôeffort.",
      "Reste concentr√© sur ton objectif.",
      "Le succ√®s est une somme de petits efforts.",
      "Aujourd‚Äôhui est un bon jour pour commencer.",
      "Tu apprends √† chaque √©tape.",
      "Ne te compare pas, avance.",
      "Ta constance est ta force.",
      "M√™me fatigu√©, continue.",
      "Chaque pas te rapproche.",
      "Ton futur te remerciera.",
      "Sois fier du chemin parcouru.",
      "Tu es exactement l√† o√π tu dois √™tre.",
      "N‚Äôarr√™te pas maintenant.",
      "Respire, puis continue.",
      "Le meilleur reste √† venir.",
      "Tu es plus r√©silient que tu crois.",
      "Un jour √† la fois.",
      "Ta d√©termination te m√®nera loin.",
      "Rien ne peut t‚Äôarr√™ter si tu continues.",
      "Fais-le pour toi.",
      "Tu avances, et c‚Äôest l‚Äôessentiel.",
      "Continue, tu touches au but.",
      "Ton √©nergie change tout."
    ];

    // ---------------------------
    // Keys
    // ---------------------------
    const STATE_KEY = "motivation_state_v3";
    const SETTINGS_KEY = "motivation_settings_v3";

    const defaultSettings = {
      limitPerDay: 5,
      fontSize: 18,
      theme: "gold",      // gold | minimal
      vibrate: true
    };

    function todayKey() {
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth() + 1).padStart(2, "0");
      const dd = String(d.getDate()).padStart(2, "0");
      return `${yyyy}-${mm}-${dd}`;
    }

    function loadSettings() {
      try {
        const saved = JSON.parse(localStorage.getItem(SETTINGS_KEY) || "{}");
        return { ...defaultSettings, ...saved };
      } catch {
        return { ...defaultSettings };
      }
    }

    function saveSettings(s) {
      localStorage.setItem(SETTINGS_KEY, JSON.stringify(s));
    }

    function loadState() {
      const today = todayKey();
      try {
        const saved = JSON.parse(localStorage.getItem(STATE_KEY) || "{}");
        if (saved.date !== today) return { date: today, count: 0 };
        return { date: today, count: Number(saved.count || 0) };
      } catch {
        return { date: today, count: 0 };
      }
    }

    function saveState(st) {
      localStorage.setItem(STATE_KEY, JSON.stringify(st));
    }

    // ---------------------------
    // UI
    // ---------------------------
    const quoteEl = document.getElementById("quote");
    const limitEl = document.getElementById("limitMessage");
    const counterEl = document.getElementById("counter");
    const dateEl = document.getElementById("date");
    const startBtn = document.getElementById("startBtn");
    const newBtn = document.getElementById("newBtn");

    // modal
    const overlay = document.getElementById("overlay");
    const openSettingsBtn = document.getElementById("openSettingsBtn");
    const closeBtn = document.getElementById("closeBtn");
    const saveBtn = document.getElementById("saveBtn");
    const resetBtn = document.getElementById("resetBtn");

    const limitInput = document.getElementById("limitInput");
    const fontRange = document.getElementById("fontRange");
    const themeSelect = document.getElementById("themeSelect");
    const vibrateToggle = document.getElementById("vibrateToggle");

    function pickQuote() {
      return quotes[Math.floor(Math.random() * quotes.length)];
    }

    function doVibrate(settings) {
      if (!settings.vibrate) return;
      if (navigator.vibrate) navigator.vibrate(30);
    }

    function applySettings(settings) {
      document.body.classList.toggle("theme-minimal", settings.theme === "minimal");
      quoteEl.style.fontSize = settings.fontSize + "px";
    }

    function updateFooter(state, settings) {
      counterEl.textContent = `${state.count} / ${settings.limitPerDay} aujourd‚Äôhui`;
      dateEl.textContent = todayKey();
    }

    function canShowMore(state, settings) {
      return state.count < settings.limitPerDay;
    }

    function render() {
      const settings = loadSettings();
      const state = loadState();

      applySettings(settings);
      updateFooter(state, settings);

      if (!canShowMore(state, settings)) {
        limitEl.style.display = "block";
      } else {
        limitEl.style.display = "none";
      }
    }

    function showMotivation() {
      const settings = loadSettings();
      const state = loadState();

      if (!canShowMore(state, settings)) {
        quoteEl.textContent = "üíõ Limite atteinte aujourd‚Äôhui. Reviens demain !";
        render();
        return;
      }

      quoteEl.textContent = pickQuote();
      state.count += 1;
      saveState(state);
      doVibrate(settings);
      render();
    }

    // ---------------------------
    // Buttons
    // ---------------------------
    startBtn.addEventListener("click", showMotivation);
    newBtn.addEventListener("click", showMotivation);

    // Open settings
    openSettingsBtn.addEventListener("click", () => {
      const settings = loadSettings();
      limitInput.value = settings.limitPerDay;
      fontRange.value = settings.fontSize;
      themeSelect.value = settings.theme;
      vibrateToggle.checked = !!settings.vibrate;
      overlay.classList.add("show");
    });

    // Close settings
    closeBtn.addEventListener("click", () => overlay.classList.remove("show"));
    overlay.addEventListener("click", (e) => {
      if (e.target === overlay) overlay.classList.remove("show");
    });

    // Save settings
    saveBtn.addEventListener("click", () => {
      const newSettings = {
        limitPerDay: Math.max(1, Math.min(20, Number(limitInput.value || 5))),
        fontSize: Math.max(16, Math.min(26, Number(fontRange.value || 18))),
        theme: themeSelect.value === "minimal" ? "minimal" : "gold",
        vibrate: !!vibrateToggle.checked
      };
      saveSettings(newSettings);
      overlay.classList.remove("show");
      render();
    });

    // Reset (for tests)
    resetBtn.addEventListener("click", () => {
      const st = loadState();
      st.count = 0;
      saveState(st);
      quoteEl.textContent = "Compteur remis √† z√©ro ‚úÖ Appuie sur Start.";
      render();
    });

    // init
    render();
  </script>
</body>
</html>

